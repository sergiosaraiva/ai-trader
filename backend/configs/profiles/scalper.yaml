# =============================================================================
# SCALPER PROFILE
# =============================================================================
# Optimized for very short-term, almost real-time trading
# Target users: Scalpers, fast day traders, algorithmic traders
#
# Inherits from: base.yaml
# Only override values that differ from base profile
# =============================================================================

profile:
  name: "scalper"
  version: "1.0"
  description: "Very short-term trading profile for scalpers and fast day traders"
  inherits: "base"

  # ===========================================================================
  # TIMEFRAMES - Fast intervals for scalping
  # ===========================================================================

  timeframes:
    short_term:
      candle_minutes: 15          # 15m candles
      input_window: 192           # 2 days of data
      min_history_required: 500   # More data needed for noisy timeframe
      prediction_horizons:
        - {periods: 1, label: "15m"}
        - {periods: 2, label: "30m"}
        - {periods: 4, label: "1H"}
        - {periods: 8, label: "2H"}

    medium_term:
      candle_minutes: 60          # 1H candles
      input_window: 168           # 7 days
      min_history_required: 250
      prediction_horizons:
        - {periods: 1, label: "1H"}
        - {periods: 2, label: "2H"}
        - {periods: 4, label: "4H"}
        - {periods: 8, label: "8H"}

    long_term:
      candle_minutes: 240         # 4H candles
      input_window: 180           # 30 days
      min_history_required: 250
      prediction_horizons:
        - {periods: 1, label: "4H"}
        - {periods: 2, label: "8H"}
        - {periods: 3, label: "12H"}
        - {periods: 6, label: "24H"}

  # ===========================================================================
  # TECHNICAL INDICATORS - Fast, responsive indicators
  # ===========================================================================

  indicators:
    short_term:
      trend:
        ema:
          enabled: true
          periods: [5, 8, 13, 21]  # Faster EMAs for scalping
          priority: P0
        supertrend:
          enabled: true
          period: 7               # Shorter period for faster response
          multiplier: 2.5         # Tighter bands
          priority: P0
        sma:
          enabled: false          # Too slow for scalping

      momentum:
        rsi:
          enabled: true
          periods: [7, 9]         # Faster RSI (7 is minimum reliable period)
          overbought: 75          # Adjusted thresholds for scalping
          oversold: 25
          priority: P0
        macd:
          enabled: true
          fast: 8                 # Faster MACD
          slow: 17
          signal: 9
          priority: P0
        stochastic:
          enabled: true
          k_period: 5
          d_period: 3
          smooth_k: 3
          priority: P0
        mfi:
          enabled: true
          period: 10              # Shorter MFI
          priority: P1
        momentum:
          enabled: true
          period: 7
          priority: P1

      volatility:
        atr:
          enabled: true
          period: 10              # Shorter ATR
          normalized: true
          priority: P0
        bollinger:
          enabled: true
          period: 14              # Shorter Bollinger
          std_dev: 2.0
          include_width: true
          include_percent_b: true
          priority: P0

      volume:
        obv:
          enabled: true
          priority: P0
        vwap:
          enabled: true
          priority: P0
        force_index:
          enabled: true
          period: 10
          priority: P1

    medium_term:
      trend:
        ema:
          enabled: true
          periods: [8, 21, 55]
          priority: P0
        sma:
          enabled: true
          periods: [20, 50]
          priority: P1
        adx:
          enabled: true
          period: 14
          include_di: true
          priority: P1

      momentum:
        rsi:
          enabled: true
          periods: [9, 14]
          priority: P0
        macd:
          enabled: true
          priority: P0
        stochastic:
          enabled: true
          priority: P1

      volatility:
        atr:
          enabled: true
          period: 14
          priority: P0
        bollinger:
          enabled: true
          priority: P1

    long_term:
      # Mostly inherit from base, just ensure key indicators
      trend:
        sma:
          enabled: true
          periods: [20, 50, 100]
          priority: P0
        adx:
          enabled: true
          period: 14
          priority: P0

      momentum:
        rsi:
          enabled: true
          periods: [14]
          priority: P0
        macd:
          enabled: true
          priority: P0

      volatility:
        atr:
          enabled: true
          priority: P0

  # ===========================================================================
  # MODEL - Smaller, faster models for quick inference
  # ===========================================================================

  models:
    short_term:
      architecture: "cnn_lstm_attention"
      cnn:
        filters: [32, 64, 128]    # Smaller for speed
        kernel_sizes: [3, 5]
        dropout: 0.15
      lstm:
        hidden_size: 128          # Smaller
        num_layers: 1
        dropout: 0.2
        bidirectional: true
      attention:
        heads: 4
        dim: 128

    medium_term:
      architecture: "cnn_lstm_attention"  # Simpler than TFT for speed
      cnn:
        filters: [64, 128, 256]
        kernel_sizes: [3, 5, 7]
        dropout: 0.2
      lstm:
        hidden_size: 256
        num_layers: 2
        dropout: 0.3
        bidirectional: true
      attention:
        heads: 8
        dim: 256

  # ===========================================================================
  # TRAINING - Faster training cycles
  # ===========================================================================

  training:
    batch_size: 128               # Larger batches for speed
    epochs: 50                    # Fewer epochs
    early_stopping_patience: 10
    learning_rate: 0.0005         # Slightly higher LR

  # ===========================================================================
  # ENSEMBLE - Favor short-term signals
  # ===========================================================================

  ensemble:
    base_weights:
      short_term: 0.50            # Higher weight on short-term
      medium_term: 0.30
      long_term: 0.20

    dynamic_adjustment:
      regime_weights:
        trending_up:
          short_term: 0.40
          medium_term: 0.35
          long_term: 0.25
        trending_down:
          short_term: 0.40
          medium_term: 0.35
          long_term: 0.25
        ranging:
          short_term: 0.55
          medium_term: 0.30
          long_term: 0.15
        volatile:
          short_term: 0.45
          medium_term: 0.35
          long_term: 0.20

  # ===========================================================================
  # SIGNALS - Lower thresholds for more frequent signals
  # ===========================================================================

  signals:
    min_confidence: 0.55          # Lower threshold
    high_confidence: 0.75

    buy_threshold: 0.25           # More sensitive
    sell_threshold: -0.25
    strong_buy_threshold: 0.40
    strong_sell_threshold: -0.40

    neutral_zone:
      lower: -0.10
      upper: 0.10

    cooldown_periods: 0           # No cooldown for scalping

  # ===========================================================================
  # RISK - Tighter risk management
  # ===========================================================================

  risk:
    position_sizing:
      method: "fixed"
      max_position_pct: 1.0       # Smaller positions
      risk_per_trade_pct: 0.5     # Less risk per trade

    stop_loss:
      method: "atr"
      atr_multiplier: 1.5         # Tighter stops
      min_pct: 0.3
      max_pct: 2.0

    take_profit:
      risk_reward_ratio: 1.5      # Lower R:R acceptable for scalping
      atr_multiplier: 2.0

    trailing_stop:
      enabled: true
      activation_pct: 0.5
      trail_pct: 0.3

    max_drawdown_pct: 10.0        # Tighter drawdown limit
    max_daily_loss_pct: 2.0

  # ===========================================================================
  # SESSIONS - Focus on high liquidity
  # ===========================================================================

  sessions:
    enabled: true
    # Note: Times are standard UTC (non-DST). During DST, add 1 hour.

    active_sessions:
      - name: "London"
        start: "07:00"              # 07:00-16:00 UTC
        end: "16:00"
        weight: 1.3               # Strong preference
      - name: "NewYork"
        start: "12:00"              # 12:00-21:00 UTC
        end: "21:00"
        weight: 1.3
      - name: "LondonNY_Overlap"
        start: "12:00"              # 12:00-16:00 UTC (best 4 hours)
        end: "16:00"
        weight: 1.5               # Best for scalping - ~50% daily volume

    overlap_weight_bonus: 1.5
    avoid_low_liquidity: true
    low_liquidity_weight: 0.3

    news_handling:
      enabled: true
      blackout_minutes_before: 15  # Shorter blackout
      blackout_minutes_after: 10

  # ===========================================================================
  # DATA - More history needed for noisy data
  # ===========================================================================

  data:
    min_history_candles: 1000
    max_gap_minutes: 30           # Stricter gap handling

  # ===========================================================================
  # LOGGING
  # ===========================================================================

  logging:
    mlflow:
      experiment_name: "scalper_profile"
