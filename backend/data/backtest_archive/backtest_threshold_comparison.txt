╔══════════════════════════════════════════════════════════════════╗
║         BACKTEST THRESHOLD COMPARISON - COMPLETE ANALYSIS        ║
╚══════════════════════════════════════════════════════════════════╝

Date: 2026-01-26
Models: MTF Ensemble (1H/4H/Daily with Stacking)
Period: Test set (~2 years of data, 7,460 hourly bars)

═══════════════════════════════════════════════════════════════════
SUMMARY TABLE - ALL THRESHOLDS
═══════════════════════════════════════════════════════════════════

Threshold | Trades | Win Rate | Total Pips | Avg Pips | Profit Factor
----------|--------|----------|------------|----------|---------------
   55%    |  1,151 |  55.5%   |  +7,143    |  +6.2    |    1.97
   60%    |  1,092 |  56.0%   |  +6,994    |  +6.4    |    2.01
   65%    |  1,018 |  57.8%   |  +7,192    |  +7.1    |    2.17
   70%    |    926 |  60.0%   |  +7,347    |  +7.9    |    2.39 ⭐

═══════════════════════════════════════════════════════════════════
KEY FINDING: 70% THRESHOLD WORKS IN BACKTEST BUT NOT LIVE!
═══════════════════════════════════════════════════════════════════

HISTORICAL BACKTEST (2022-2024):
  ✅ 926 trades at 70% threshold
  ✅ 60% win rate (BEST)
  ✅ 2.39 profit factor (BEST)
  ✅ +7,347 pips (BEST)
  ✅ Avg 7.9 pips/trade (BEST)

CURRENT LIVE MODEL (2026):
  ❌ 0 predictions meet 70% threshold
  ❌ System cannot trade at all
  ❌ All predictions 55-68% confidence
  ❌ Mean confidence: 59.7%

CONCLUSION: Historical data had higher confidence predictions than
current market conditions produce!


═══════════════════════════════════════════════════════════════════
DETAILED ANALYSIS BY THRESHOLD
═══════════════════════════════════════════════════════════════════

┌──────────────────────────────────────────────────────────────────┐
│ 55% THRESHOLD - Most Trades, Lowest Quality                     │
└──────────────────────────────────────────────────────────────────┘

Trade Summary:
  • Total Trades: 1,151
  • Win Rate: 55.5%
  • Total Pips: +7,143
  • Profit Factor: 1.97

Trade Frequency:
  • ~1,151 trades / 310 days = 3.7 trades/day
  • ~26 trades/week
  • Very high frequency (almost 1 trade every 6.5 hours)

Performance by Confidence:
  • >= 60%: 1,022 trades, 57.2% win rate
  • >= 65%: 892 trades, 59.2% win rate

Exit Analysis:
  • Take Profit: 550 (47.8%)
  • Stop Loss: 485 (42.1%)
  • Timeout: 116 (10.1%)

Direction:
  • Long: 312 trades, 67.3% win rate ⭐
  • Short: 839 trades, 51.1% win rate

VERDICT: Too many trades, slightly above random. Would generate
high transaction costs. Over-trading for swing trading style.


┌──────────────────────────────────────────────────────────────────┐
│ 60% THRESHOLD - Balanced Approach ⭐ RECOMMENDED                 │
└──────────────────────────────────────────────────────────────────┘

Trade Summary:
  • Total Trades: 1,092
  • Win Rate: 56.0%
  • Total Pips: +6,994
  • Profit Factor: 2.01

Trade Frequency:
  • ~1,092 trades / 310 days = 3.5 trades/day
  • ~24 trades/week
  • Still high frequency but manageable

Performance by Confidence:
  • >= 60%: 1,092 trades, 56.0% win rate
  • >= 65%: 941 trades, 57.7% win rate

Exit Analysis:
  • Take Profit: 530 (48.5%)
  • Stop Loss: 452 (41.4%)
  • Timeout: 110 (10.1%)

Direction:
  • Long: 289 trades, 67.8% win rate ⭐
  • Short: 803 trades, 51.8% win rate

vs 55%:
  • 59 fewer trades (-5%)
  • +0.5% win rate improvement
  • -149 pips total (due to fewer trades)
  • +0.04 profit factor improvement

VERDICT: Good balance of volume and quality. Achievable with
current model (75% of predictions meet this threshold). Profitable
with room for improvement.


┌──────────────────────────────────────────────────────────────────┐
│ 65% THRESHOLD - Better Quality, Good Frequency                  │
└──────────────────────────────────────────────────────────────────┘

Trade Summary:
  • Total Trades: 1,018
  • Win Rate: 57.8%
  • Total Pips: +7,192
  • Profit Factor: 2.17

Trade Frequency:
  • ~1,018 trades / 310 days = 3.3 trades/day
  • ~23 trades/week
  • High but sustainable frequency

Performance by Confidence:
  • >= 60%: 1,018 trades, 57.8% win rate
  • >= 65%: 1,018 trades, 57.8% win rate

Exit Analysis:
  • Take Profit: 507 (49.8%)
  • Stop Loss: 403 (39.6%)
  • Timeout: 108 (10.6%)

Direction:
  • Long: 255 trades, 72.5% win rate ⭐⭐
  • Short: 763 trades, 52.8% win rate

vs 60%:
  • 74 fewer trades (-7%)
  • +1.8% win rate improvement
  • +198 pips total (better quality)
  • +0.16 profit factor improvement

VERDICT: Sweet spot for quality vs frequency. Achievable with
current model (75% of predictions meet this). Significantly
better than 60% with minimal trade reduction.


┌──────────────────────────────────────────────────────────────────┐
│ 70% THRESHOLD - Best Quality, BUT NOT ACHIEVABLE LIVE! ❌       │
└──────────────────────────────────────────────────────────────────┘

Trade Summary:
  • Total Trades: 926
  • Win Rate: 60.0% ⭐⭐⭐
  • Total Pips: +7,347 (HIGHEST)
  • Profit Factor: 2.39 (HIGHEST)

Trade Frequency:
  • ~926 trades / 310 days = 3.0 trades/day
  • ~21 trades/week
  • Good swing trading frequency

Performance by Confidence:
  • >= 60%: 926 trades, 60.0% win rate
  • >= 65%: 926 trades, 60.0% win rate

Exit Analysis:
  • Take Profit: 481 (51.9%) - HIGHEST
  • Stop Loss: 348 (37.6%) - LOWEST
  • Timeout: 97 (10.5%)

Direction:
  • Long: 229 trades, 74.2% win rate ⭐⭐⭐
  • Short: 697 trades, 55.4% win rate

vs 65%:
  • 92 fewer trades (-9%)
  • +2.2% win rate improvement
  • +155 pips total (higher quality)
  • +0.22 profit factor improvement

THE PROBLEM:
  ❌ Current live model produces 0% predictions at 70%
  ❌ Historical test data had 12.4% at 70% (926/7460)
  ❌ Model confidence has degraded in recent market

VERDICT: BEST backtest results but UNUSABLE in current market.
Would require model recalibration or confidence boosting.


═══════════════════════════════════════════════════════════════════
TRADE FREQUENCY COMPARISON
═══════════════════════════════════════════════════════════════════

Threshold | Trades/Day | Trades/Week | Style
----------|------------|-------------|------------------
   55%    |    3.7     |     26      | Over-trading
   60%    |    3.5     |     24      | Active swing
   65%    |    3.3     |     23      | Swing trading ⭐
   70%    |    3.0     |     21      | Swing trading (if achievable)

Target: 4-10 trades/week for swing trading
Reality: All thresholds show 20+ trades/week (too active)

IMPORTANT: These frequencies are from HISTORICAL data where
model confidence was higher. Current model may trade LESS
frequently at same thresholds.


═══════════════════════════════════════════════════════════════════
QUALITY METRICS PROGRESSION
═══════════════════════════════════════════════════════════════════

As threshold increases:

Win Rate:        55.5% → 56.0% → 57.8% → 60.0% (+4.5%)
Profit Factor:   1.97  → 2.01  → 2.17  → 2.39  (+21%)
Avg Pips/Trade:  +6.2  → +6.4  → +7.1  → +7.9  (+27%)

Take Profit %:   47.8% → 48.5% → 49.8% → 51.9% (+4.1%)
Stop Loss %:     42.1% → 41.4% → 39.6% → 37.6% (-4.5%)

CONCLUSION: Higher thresholds = Better quality trades
But: Need model to actually produce those confidence levels!


═══════════════════════════════════════════════════════════════════
COMPARISON TO OLD RESULTS (Before Re-run)
═══════════════════════════════════════════════════════════════════

OLD backtest_results.json showed:
  • All thresholds (55-70%): 887 trades, 56.5% WR, 5,239 pips
  • Same results for all thresholds (IMPOSSIBLE)

NEW backtest results show:
  • 55%: 1,151 trades, 55.5% WR, 7,143 pips
  • 60%: 1,092 trades, 56.0% WR, 6,994 pips
  • 65%: 1,018 trades, 57.8% WR, 7,192 pips
  • 70%:   926 trades, 60.0% WR, 7,347 pips

FINDINGS:
  ✅ Old results were INCORRECT
  ✅ New results properly vary by threshold
  ✅ All thresholds more profitable than old numbers
  ✅ 70% threshold NOT tested in old backtest


═══════════════════════════════════════════════════════════════════
LIVE MODEL CONFIDENCE ANALYSIS
═══════════════════════════════════════════════════════════════════

Current Live Predictions (32 total):
  • 0% >= 70% (0 predictions) ❌
  • 75% >= 65% (24 predictions)
  • 75% >= 60% (24 predictions)
  • 100% >= 55% (32 predictions)

Historical Test Set:
  • 12.4% >= 70% (926/7460 predictions)
  • 13.6% >= 65% (1018/7460)
  • 14.6% >= 60% (1092/7460)
  • 15.4% >= 55% (1151/7460)

PROBLEM: Live model producing ~8% lower confidence than historical!

Possible Causes:
  1. Recent market regime different from training data
  2. Model needs probability calibration
  3. Stacking meta-learner reducing confidence
  4. EPU/VIX sentiment data degrading predictions


═══════════════════════════════════════════════════════════════════
RECOMMENDATION: USE 60% THRESHOLD
═══════════════════════════════════════════════════════════════════

Why 60%?

✅ ACHIEVABLE: 75% of current live predictions meet this
   - Won't leave system dormant
   - Trades will actually execute

✅ PROFITABLE: Historical backtest shows solid results
   - 56% win rate (above 55% minimum)
   - 2.01 profit factor (acceptable)
   - +6,994 pips over test period

✅ REASONABLE FREQUENCY: ~24 trades/week
   - More active than desired but manageable
   - Monitor live performance to adjust

✅ ROOM TO TIGHTEN: Can increase to 65% if performance strong
   - 65% shows better metrics (57.8% WR, 2.17 PF)
   - Also achievable with current model

❌ DON'T USE 70%: Model can't achieve it currently
   - Would result in zero trades
   - Needs model recalibration first


═══════════════════════════════════════════════════════════════════
NEXT STEPS
═══════════════════════════════════════════════════════════════════

IMMEDIATE (Completed):
  ✅ Updated threshold to 60% in code
  ✅ Re-ran backtests at all thresholds
  ✅ Identified 70% is not viable currently

DEPLOY (Next):
  1. Restart backend with 60% threshold
  2. Monitor live trading for 1-2 weeks
  3. Track actual win rate and compare to backtest

MONITOR:
  • Live win rate: Should be ~56%
  • Trade frequency: Expect ~3-4/day
  • Confidence distribution: Should stay 60-68%
  • Compare to backtest expectations

ADJUST:
  • If live WR > 58%: Consider tightening to 65%
  • If live WR < 54%: Keep at 60% or loosen to 58%
  • If frequency too high: Increase threshold
  • If frequency too low: Investigate model confidence

LONG TERM:
  • Investigate model calibration techniques
  • Research why confidence dropped vs historical
  • Consider ensemble confidence boosting
  • Explore alternative filtering (agreement score)


╔══════════════════════════════════════════════════════════════════╗
║                    THRESHOLD UPDATED TO 60% ✅                   ║
║                                                                  ║
║  Historical Backtest: 1,092 trades, 56% WR, +6,994 pips        ║
║  Live Achievability: 75% of current predictions qualify         ║
║  Trade Frequency: ~24 trades/week (3.5/day)                    ║
║                                                                  ║
║  System is now configured for realistic live trading!           ║
╚══════════════════════════════════════════════════════════════════╝
