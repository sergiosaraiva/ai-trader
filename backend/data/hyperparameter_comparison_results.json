{
  "comparison_date": "2026-01-22T10:00:00",
  "description": "Targeted hyperparameter comparison testing 8 configurations over 2 rounds",
  "methodology": "Train with --sentiment --stacking, backtest on test period",
  "rounds": {
    "round_1": {
      "date": "2026-01-21",
      "description": "Initial 5 configurations to find direction",
      "winner": "shallow_fast"
    },
    "round_2": {
      "date": "2026-01-22",
      "description": "3 variations around shallow_fast winner",
      "winner": "shallow_fast (confirmed)"
    }
  },
  "results": [
    {
      "rank": 1,
      "config_name": "shallow_fast",
      "round": 1,
      "description": "Shallow trees with higher learning rate",
      "hyperparams": {
        "1H": {"n_estimators": 250, "max_depth": 4, "learning_rate": 0.08},
        "4H": {"n_estimators": 200, "max_depth": 3, "learning_rate": 0.08},
        "D": {"n_estimators": 150, "max_depth": 3, "learning_rate": 0.08}
      },
      "backtest_results": {
        "total_pips": 8135.3,
        "win_rate": 0.586,
        "profit_factor": 2.24,
        "total_trades": 1108,
        "full_agreement_wr": 0.567
      },
      "validation_accuracy": {
        "1H": 0.6818,
        "4H": 0.6654,
        "D": 0.6017,
        "meta": 0.5986
      },
      "vs_baseline": "+4.4%"
    },
    {
      "rank": 2,
      "config_name": "even_shallower",
      "round": 2,
      "description": "Even shallower depth (3/2/2) with same lr",
      "hyperparams": {
        "1H": {"n_estimators": 250, "max_depth": 3, "learning_rate": 0.08},
        "4H": {"n_estimators": 200, "max_depth": 2, "learning_rate": 0.08},
        "D": {"n_estimators": 150, "max_depth": 2, "learning_rate": 0.08}
      },
      "backtest_results": {
        "total_pips": 8113.0,
        "win_rate": 0.582,
        "profit_factor": 2.24,
        "total_trades": 1100
      },
      "vs_baseline": "+4.1%",
      "vs_shallow_fast": "-0.3%"
    },
    {
      "rank": 3,
      "config_name": "baseline",
      "round": 1,
      "description": "Current production configuration",
      "hyperparams": {
        "1H": {"n_estimators": 200, "max_depth": 6, "learning_rate": 0.05},
        "4H": {"n_estimators": 150, "max_depth": 5, "learning_rate": 0.05},
        "D": {"n_estimators": 100, "max_depth": 4, "learning_rate": 0.05}
      },
      "backtest_results": {
        "total_pips": 7790.0,
        "win_rate": 0.579,
        "profit_factor": 2.19,
        "total_trades": 1087,
        "full_agreement_wr": 0.591
      },
      "validation_accuracy": {
        "1H": 0.6740,
        "4H": 0.6644,
        "D": 0.5960,
        "meta": 0.5845
      },
      "vs_baseline": "-"
    },
    {
      "rank": 4,
      "config_name": "deeper",
      "round": 1,
      "description": "Slightly more capacity (depth +1)",
      "hyperparams": {
        "1H": {"n_estimators": 200, "max_depth": 7, "learning_rate": 0.05},
        "4H": {"n_estimators": 150, "max_depth": 6, "learning_rate": 0.05},
        "D": {"n_estimators": 100, "max_depth": 5, "learning_rate": 0.05}
      },
      "backtest_results": {
        "total_pips": 7749.2,
        "win_rate": 0.581,
        "profit_factor": 2.19,
        "total_trades": 1085,
        "full_agreement_wr": 0.625
      },
      "vs_baseline": "-0.5%"
    },
    {
      "rank": 5,
      "config_name": "more_trees_shallow",
      "round": 2,
      "description": "More trees (50% more) with shallow depth and moderate LR",
      "hyperparams": {
        "1H": {"n_estimators": 350, "max_depth": 4, "learning_rate": 0.06},
        "4H": {"n_estimators": 300, "max_depth": 3, "learning_rate": 0.06},
        "D": {"n_estimators": 200, "max_depth": 3, "learning_rate": 0.06}
      },
      "backtest_results": {
        "total_pips": 7678.6,
        "win_rate": 0.575,
        "profit_factor": 2.13,
        "total_trades": 1113
      },
      "vs_baseline": "-1.4%",
      "vs_shallow_fast": "-5.6%"
    },
    {
      "rank": 6,
      "config_name": "higher_lr",
      "round": 2,
      "description": "Higher learning rate (0.10)",
      "hyperparams": {
        "1H": {"n_estimators": 250, "max_depth": 4, "learning_rate": 0.10},
        "4H": {"n_estimators": 200, "max_depth": 3, "learning_rate": 0.10},
        "D": {"n_estimators": 150, "max_depth": 3, "learning_rate": 0.10}
      },
      "backtest_results": {
        "total_pips": 7628.0,
        "win_rate": 0.573,
        "profit_factor": 2.14,
        "total_trades": 1105
      },
      "vs_baseline": "-2.1%",
      "vs_shallow_fast": "-6.2%"
    },
    {
      "rank": 7,
      "config_name": "conservative",
      "round": 1,
      "description": "More regularized (less depth, fewer trees, lower LR)",
      "hyperparams": {
        "1H": {"n_estimators": 150, "max_depth": 5, "learning_rate": 0.03},
        "4H": {"n_estimators": 120, "max_depth": 4, "learning_rate": 0.03},
        "D": {"n_estimators": 80, "max_depth": 3, "learning_rate": 0.03}
      },
      "backtest_results": {
        "total_pips": 7542.8,
        "win_rate": 0.567,
        "profit_factor": 2.07,
        "total_trades": 1133
      },
      "vs_baseline": "-3.2%"
    },
    {
      "rank": 8,
      "config_name": "more_trees",
      "round": 1,
      "description": "More trees with lower learning rate",
      "hyperparams": {
        "1H": {"n_estimators": 300, "max_depth": 6, "learning_rate": 0.03},
        "4H": {"n_estimators": 225, "max_depth": 5, "learning_rate": 0.03},
        "D": {"n_estimators": 150, "max_depth": 4, "learning_rate": 0.03}
      },
      "backtest_results": {
        "total_pips": 7461.6,
        "win_rate": 0.566,
        "profit_factor": 2.10,
        "total_trades": 1102
      },
      "vs_baseline": "-4.2%"
    }
  ],
  "key_findings": [
    "shallow_fast (depth 3-4, lr 0.08) outperforms baseline by +4.4% pips",
    "Confirmed through round 2 testing: variations around shallow_fast performed worse",
    "even_shallower came close (-0.3%) but depth 2 is too restrictive for 4H/D models",
    "higher_lr (0.10) overshoots - 0.08 is the sweet spot for learning rate",
    "more_trees_shallow showed more trees don't help when combined with slower lr",
    "Higher validation accuracy does NOT always translate to better backtest",
    "Shallower trees with faster learning rate prevents overfitting"
  ],
  "optimal_config": {
    "name": "shallow_fast",
    "hyperparams": {
      "1H": {"n_estimators": 250, "max_depth": 4, "learning_rate": 0.08},
      "4H": {"n_estimators": 200, "max_depth": 3, "learning_rate": 0.08},
      "D": {"n_estimators": 150, "max_depth": 3, "learning_rate": 0.08}
    },
    "improvement_vs_baseline": "+4.4%",
    "pips": 8135.3,
    "win_rate": 0.586,
    "profit_factor": 2.24
  },
  "recommendation": "ADOPT shallow_fast configuration for production - confirmed optimal through 8 configuration tests"
}
